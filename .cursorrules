# Правила для проекта "Система контроля материалов"

## Контекст проекта
Это desktop-приложение на PyQt5 для учета и контроля качества металлопроката.
Используется SQLite для хранения данных.

## Архитектурные принципы
1. Постепенный переход от монолита к MVC/MVP архитектуре
2. Создание сервисного слоя между GUI и БД
3. Использование type hints во всем новом коде
4. Следование PEP 8

## Соглашения по коду
1. Имена классов - PascalCase
2. Имена функций и переменных - snake_case
3. Приватные методы начинаются с _
4. Константы - UPPER_CASE
5. Все строки в БД - UTF-8
6. Даты в БД - формат ISO (YYYY-MM-DD)

## Структура проекта
- /db - слой работы с БД
- /gui - графический интерфейс
- /services - бизнес-логика (новый слой)
- /tests - тесты
- /migrations - миграции БД (новое)

## Зависимости
- Python 3.10+
- PyQt5 (планируется переход на PyQt6)
- SQLAlchemy (для новых модулей)
- pytest для тестов

## Важные моменты
1. Сохранять обратную совместимость с существующей БД
2. Новый код должен быть покрыт тестами
3. Использовать логирование вместо print
4. Обрабатывать исключения на уровне сервисов
5. UI не должен содержать бизнес-логику

## Безопасность
1. Использовать параметризованные запросы
2. Валидировать все пользовательские вводы
3. Хешировать пароли с bcrypt (вместо SHA256)
4. Логировать все критические операции